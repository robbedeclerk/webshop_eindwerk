{% extends "base.html" %}
{% block content %}
<body>
    <h1>Checkout</h1>
    <form action="{{ url_for('place_order') }}" method="POST">
        <h2>Winkelwagen</h2>
        <ul>
            {% for item in cart_items %}
            <li>{{ item.product.name }} - €{{ item.product.price }} x {{ item.quantity }}</li>
            {% endfor %}
        </ul>
        <h3>Totaal: €{{ total_price }}</h3>

        <div id="original-address">
            <h2>Adresgegevens</h2>
            <label for="country">Land:</label>
            <input type="text" id="country" name="country" value="{{ current_user.country }}" required><br>
            <label for="street">Straat:</label>
            <input type="text" id="street" name="street" value="{{ current_user.street }}" required><br>
            <label for="postal_number">Postcode:</label>
            <input type="text" id="postal_number" name="postal_number" value="{{ current_user.postal_number }}" required><br>
            <label for="house_number">Huisnummer:</label>
            <input type="text" id="house_number" name="house_number" value="{{ current_user.house_number }}" required><br>
            <label for="bus_number">Busnummer:</label>
            <input type="text" id="bus_number" name="bus_number" value="{{ current_user.bus_number }}"><br>
        </div>

        <div id="alt-address-fields" style="display: none;">
            <h2>Alternatief Adresgegevens (Optioneel)</h2>
            <label for="alt_country">Land:</label>
            <input type="text" id="alt_country" name="alt_country"><br>
            <label for="alt_street">Straat:</label>
            <input type="text" id="alt_street" name="alt_street"><br>
            <label for="alt_postal_number">Postcode:</label>
            <input type="text" id="alt_postal_number" name="alt_postal_number"><br>
            <label for="alt_house_number">Huisnummer:</label>
            <input type="text" id="alt_house_number" name="alt_house_number"><br>
            <label for="alt_bus_number">Busnummer:</label>
            <input type="text" id="alt_bus_number" name="alt_bus_number"><br>
        </div>

        <button type="button" id="toggle-alt-address">Ander adres gebruiken</button><br>

        <button type="submit">Plaats Bestelling</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const toggleButton = document.getElementById('toggle-alt-address');
            const altAddressFields = document.getElementById('alt-address-fields');
            const originalAddress = document.getElementById('original-address');
            
            toggleButton.addEventListener('click', function() {
                if (altAddressFields.style.display === 'none') {
                    altAddressFields.style.display = 'block';
                    originalAddress.style.display = 'none';
                } else {
                    altAddressFields.style.display = 'none';
                    originalAddress.style.display = 'block';
                }
            });
        });
    </script>
</body>
{% endblock %}
